{"version":3,"file":"manager_app_criteria.min.js","sources":["../../../src/local/manager/manager_app_criteria.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Moves wrapping navigation items into a more menu.\n *\n * @module     mod_competvet/local/manager/manager_app_criteria\n * @class      competvet\n * @copyright  2024 Bas Brands\n * @author     Bas Brands <bas@sonsbeekmedia.nl>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport CompetState from 'mod_competvet/local/competstate';\nimport Repository from 'mod_competvet/local/new-repository';\nimport {get_string as getString} from 'core/str';\nimport './grids';\nimport './navigation';\n\n/*\n* A CRUD manager for data.\n*/\n\n/**\n * Constants for eval certif and list.\n */\nconst COMPETVET_CRITERIA_EVALUATION = 1;\nconst COMPETVET_CRITERIA_CERTIFICATION = 2;\nconst COMPETVET_CRITERIA_LIST = 3;\n\nclass Manager {\n\n    /**\n     * Constructor.\n     */\n    constructor() {\n        this.app = document.querySelector('[data-region=\"criteria\"]');\n        this.cmId = this.app.dataset.cmId;\n        this.situationId = this.app.dataset.situationId;\n        this.sets = [COMPETVET_CRITERIA_EVALUATION, COMPETVET_CRITERIA_CERTIFICATION, COMPETVET_CRITERIA_LIST];\n        if (this.cmId) {\n            this.dataset = COMPETVET_CRITERIA_CERTIFICATION;\n        } else {\n            this.dataset = COMPETVET_CRITERIA_EVALUATION;\n        }\n        this.addEventListeners();\n        this.getData();\n        if (!this.cmId) {\n            this.setNavigation();\n        }\n    }\n\n    /**\n     * Get the data for this manager.\n     */\n    async getData() {\n        const args = {\n            type: this.dataset,\n            gridid: 0,\n            situationid: this.situationId,\n        };\n        const response = await Repository.getCriteria(args);\n        CompetState.setValue('datatree', response);\n    }\n\n    /**\n     * Set the current navigation set.\n     */\n    setNavigation() {\n        const context = {\n            \"eval\": this.dataset == COMPETVET_CRITERIA_EVALUATION,\n            \"evalconst\": COMPETVET_CRITERIA_EVALUATION,\n            \"list\": this.dataset == COMPETVET_CRITERIA_LIST,\n            \"listconst\": COMPETVET_CRITERIA_LIST,\n            \"certif\": this.dataset == COMPETVET_CRITERIA_CERTIFICATION,\n            \"certifconst\": COMPETVET_CRITERIA_CERTIFICATION,\n        };\n        CompetState.setValue('navigation', context);\n        CompetState.setValue('type', this.dataset);\n    }\n\n    /**\n     * Add event listeners to the page.\n     * @return {void}\n     */\n    addEventListeners() {\n        document.addEventListener('click', (e) => {\n            let btn = e.target.closest('[data-action]');\n            if (btn) {\n                e.preventDefault();\n                this.actions(btn);\n            }\n        });\n        document.addEventListener('saveState', async() => {\n            this.save();\n        });\n        this.app.classList.add('jsenabled');\n    }\n\n    /**\n     * Actions.\n     * @param {object} btn The button that was clicked.\n     */\n    actions(btn) {\n        if (btn.dataset.action === 'add') {\n            this.add(btn);\n        }\n        if (btn.dataset.action === 'edit') {\n            this.edit(btn);\n        }\n        if (btn.dataset.action === 'save') {\n            this.save();\n            this.stopEdit();\n        }\n        if (btn.dataset.action === 'delete') {\n            this.delete(btn);\n        }\n        if (btn.dataset.action === 'changedataset') {\n            this.dataset = Number(btn.dataset.dataset);\n            this.setNavigation();\n            this.getData();\n        }\n    }\n\n    removeEdit() {\n        let state = CompetState.getValue('datatree');\n        state.grids.forEach((element) => {\n            element.criteria.forEach((element) => {\n                element.edit = false;\n            });\n        });\n    }\n\n    /**\n     * Add a new planning or category by manipulating the state, for the state structure see the example data structure.\n     * @param {object} btn The button that was clicked.\n     */\n    async add(btn) {\n        this.update();\n        let state = CompetState.getValue('datatree');\n\n        if (btn.dataset.type === 'grid') {\n            let newGridSortOrder = 1;\n            if (state.grids.length > 0) {\n                newGridSortOrder = Math.max(...state.grids.map((element) => element.sortorder)) + 1;\n            }\n            state.grids.push({\n                gridname: '',\n                edit: true,\n                canedit: true,\n                type: this.dataset,\n                placeholder: await getString('newgrid', 'mod_competvet'),\n                gridid: -1,\n                sortorder: newGridSortOrder,\n                criteria: [],\n            });\n        }\n        if (btn.dataset.type === 'criterion') {\n            this.removeEdit();\n            const index = state.grids.find((element) => element.gridid === parseInt(btn.dataset.gridId));\n            let newCritSortOrder = 1;\n            if (index.criteria.length > 0) {\n                newCritSortOrder = Math.max(...index.criteria.map((element) => element.sortorder)) + 1;\n            }\n            const newcriterion = {\n                criterionid: 0,\n                idnumber: 'G' + index.gridid + '-C' + newCritSortOrder,\n                sortorder: newCritSortOrder,\n                title: '',\n                placeholder: await getString('newcriterion', 'mod_competvet'),\n                options: [],\n                edit: true,\n            };\n\n            if (this.dataset == COMPETVET_CRITERIA_LIST || this.dataset == COMPETVET_CRITERIA_EVALUATION) {\n                newcriterion.hasoptions = true;\n            }\n            index.criteria.push(newcriterion);\n        }\n        if (btn.dataset.type === 'option') {\n            const index = state.grids.find((element) => element.gridid === parseInt(btn.dataset.gridId));\n            const criterion = index.criteria.find((element) => element.criterionid === parseInt(btn.dataset.criterionId));\n            criterion.edit = true;\n            let newOptSortOrder = 1;\n            if (criterion.options.length > 0) {\n                newOptSortOrder = Math.max(...criterion.options.map((element) => element.sortorder)) + 1;\n            }\n            const newOption = {\n                optionid: 0,\n                idnumber: 'G' + index.gridid + '-C' + criterion.criterionid + '-O' + newOptSortOrder,\n                sortorder: newOptSortOrder,\n                title: '',\n                placeholder: await getString('newoption', 'mod_competvet'),\n            };\n            if (this.dataset === COMPETVET_CRITERIA_LIST) {\n                newOption.hasgrade = true;\n                newOption.grade = 0;\n            }\n\n            criterion.options.push(newOption);\n        }\n        CompetState.setValue('datatree', state);\n    }\n\n    /**\n     * Delete a planning or category by manipulating the state, for the state structure see the example data structure.\n     * @param {object} btn The button that was clicked.\n     */\n    delete(btn) {\n        let state = CompetState.getValue('datatree');\n        if (btn.dataset.type === 'grid') {\n            state.grids.find((element) => element.gridid === parseInt(btn.dataset.id)).deleted = true;\n        }\n        if (btn.dataset.type === 'criterion') {\n            const index = state.grids.find((element) => element.gridid === parseInt(btn.dataset.gridId));\n            index.criteria.find((element) => element.criterionid === parseInt(btn.dataset.id)).deleted = true;\n        }\n        if (btn.dataset.type === 'option') {\n            const index = state.grids.find((element) => element.gridid === parseInt(btn.dataset.gridId));\n            const criterion = index.criteria.find((element) => element.criterionid === parseInt(btn.dataset.criterionId));\n            criterion.options.find((element) => element.optionid === parseInt(btn.dataset.id)).deleted = true;\n        }\n        CompetState.setValue('datatree', state);\n        this.save();\n    }\n\n    /**\n     * Edit a planning or category by manipulating the state, for the state structure see the example data structure.\n     * All fields in the button container row with data-fieldtype will be made editable.\n     * @param {object} btn The button that was clicked.\n     */\n    edit(btn) {\n        const state = CompetState.getValue('datatree');\n        // Remove edit from all fields.\n        this.stopEdit(state);\n        if (btn.dataset.type === 'grid') {\n            const index = state.grids.find((element) => element.gridid === parseInt(btn.dataset.id));\n            index.edit = true;\n        }\n        if (btn.dataset.type === 'criterion') {\n            const index = state.grids.find((element) => element.gridid === parseInt(btn.dataset.gridId));\n            const criterion = index.criteria.find((element) => element.criterionid === parseInt(btn.dataset.id));\n            criterion.edit = true;\n            if (this.dataset == COMPETVET_CRITERIA_LIST || this.dataset == COMPETVET_CRITERIA_EVALUATION) {\n                criterion.hasoptions = true;\n            } else {\n                criterion.hasoptions = false;\n            }\n        }\n        CompetState.setValue('datatree', state);\n    }\n\n    /**\n     * Stop editing, remove the edit flag from the state elements.\n     */\n    stopEdit() {\n        const state = CompetState.getValue('datatree');\n        // Remove edit from all fields.\n        state.grids.forEach((element) => {\n            element.edit = false;\n            element.criteria.forEach((element) => {\n                element.edit = false;\n            });\n        });\n        CompetState.setValue('datatree', state);\n    }\n\n    update() {\n        const state = CompetState.getValue('datatree');\n        state.grids.forEach((element) => {\n            if (element.edit) {\n                // Update the grid with the new values from the UI.\n                element.haschanged = true;\n                element.gridname = this.getValue('grid', 'gridname', element.gridid);\n                element.situationid = this.situationId;\n            }\n            element.criteria.forEach((element) => {\n                if (element.edit && !element.deleted) {\n                    // Update the criterion with the new values from the UI.\n                    element.haschanged = true;\n                    element.label = this.getValue('criterion', 'label', element.criterionid);\n                    if (!element.hasoptions) {\n                        return;\n                    }\n                    element.options.forEach((element) => {\n                        if (element.deleted) {\n                            return;\n                        }\n                        element.label = this.getValue('option', 'label', element.optionid);\n                        if (this.dataset === COMPETVET_CRITERIA_LIST) {\n                            element.grade = this.getValue('option', 'grade', element.optionid);\n                            element.grade = parseFloat(element.grade);\n                        }\n                    });\n                }\n            });\n        });\n        CompetState.setValue('datatree', state);\n    }\n\n    /**\n     * Get the grid object keys that can be accepted by the server.\n     */\n    get gridObjectKeys() {\n        return ['gridid', 'gridname', 'type', 'situationid', 'sortorder', 'criteria', 'haschanged', 'deleted', 'updatesortorder'];\n    }\n\n    /**\n     * Get the criterion object keys that can be accepted by the server.\n     * @return {Array} The keys.\n     */\n    get criterionObjectKeys() {\n        return [\n            'criterionid', 'idnumber', 'sortorder', 'label', 'options', 'haschanged', 'hasoptions', 'deleted', 'updatesortorder'\n        ];\n    }\n\n    /**\n     * Get the option object keys that can be accepted by the server.\n     * @return {Array} The keys.\n     */\n    get optionObjectKeys() {\n        return ['optionid', 'idnumber', 'sortorder', 'label', 'grade', 'haschanged', 'deleted', 'updatesortorder'];\n    }\n\n    /**\n     * Get the clean state.\n     */\n    cleanState() {\n        const state = CompetState.getValue('datatree');\n        // Clone the state, remove the edit flags.\n        const saveState = {\n            grids: [],\n        };\n        if (state.grids.length > 0) {\n            saveState.grids = [...state.grids];\n        }\n        saveState.grids.forEach((element) => {\n            Object.keys(element).forEach((key) => {\n                if (!this.gridObjectKeys.includes(key)) {\n                    delete element[key];\n                }\n            });\n            element.criteria.forEach((element) => {\n                Object.keys(element).forEach((key) => {\n                    if (!this.criterionObjectKeys.includes(key)) {\n                        delete element[key];\n                    }\n                });\n                if (!element.haschanged) {\n                    element.haschanged = false;\n                }\n                if (!element.hasoptions) {\n                    return;\n                }\n                element.options.forEach((element) => {\n                    Object.keys(element).forEach((key) => {\n                        if (!this.optionObjectKeys.includes(key)) {\n                            delete element[key];\n                        }\n                        if (this.dataset !== COMPETVET_CRITERIA_LIST) {\n                            delete element.grade;\n                        }\n                    });\n                });\n            });\n        });\n\n        saveState.type = Number(this.dataset);\n        return saveState;\n    }\n\n\n    /**\n     * Save the state to the server.\n     */\n    async save() {\n        this.update();\n        const saveState = this.cleanState();\n        await Repository.saveCriteria(saveState);\n        this.getData();\n    }\n\n    /**\n     * Get the field value from the UI.\n     * @param {String} element The element to get the value from.\n     * @param {String} property The element property.\n     * @param {String} id The element id.\n     * @return {String} The value of the element.\n     */\n    getValue(element, property, id) {\n        const domNode = this.app.querySelector(`[data-region=\"${element}\"][data-id=\"${id}\"] [data-field=\"${property}\"]`);\n        // If the domNode is a div, it is a contenteditable field, return the innerHTML.\n        // If the domNode is an input, return the value.\n        return domNode.tagName === 'DIV' ? domNode.innerHTML : domNode.value;\n    }\n}\n\n/*\n * Initialise\n *\n */\nconst init = () => {\n    new Manager();\n};\n\nexport default {\n    init: init,\n};"],"names":["Manager","constructor","app","document","querySelector","cmId","this","dataset","situationId","sets","addEventListeners","getData","setNavigation","args","type","gridid","situationid","response","Repository","getCriteria","setValue","context","addEventListener","e","btn","target","closest","preventDefault","actions","async","save","classList","add","action","edit","stopEdit","delete","Number","removeEdit","CompetState","getValue","grids","forEach","element","criteria","update","state","newGridSortOrder","length","Math","max","map","sortorder","push","gridname","canedit","placeholder","index","find","parseInt","gridId","newCritSortOrder","newcriterion","criterionid","idnumber","title","options","hasoptions","criterion","criterionId","newOptSortOrder","newOption","optionid","hasgrade","grade","id","deleted","haschanged","label","parseFloat","gridObjectKeys","criterionObjectKeys","optionObjectKeys","cleanState","saveState","Object","keys","key","includes","saveCriteria","property","domNode","tagName","innerHTML","value","init"],"mappings":"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"}