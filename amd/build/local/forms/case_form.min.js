define("mod_competvet/local/forms/case_form",["exports","./generic_form_helper","../new-repository"],(function(_exports,_generic_form_helper,_newRepository){var obj;
/**
   * Create a Modal Form to add a case
   *
   * @module     mod_competvet/local/forms/case_form
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_newRepository=(obj=_newRepository)&&obj.__esModule?obj:{default:obj};_exports.init=modulename=>{const onSubmitHandler=()=>{window.location.reload()},button=document.querySelector('[data-action="case-add"]');button&&(button.addEventListener("click",(event=>{event.preventDefault();const data=document.querySelector('[data-region="grading-app"]').dataset,modalForm=(0,_generic_form_helper.genericFormCreate)(data,"case:add",modulename,"case_form_add");modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,onSubmitHandler),modalForm.show()})),document.addEventListener("click",(async event=>{if(event.target.closest('[data-action="delete-case"]')){const button=event.target.closest('[data-action="delete-case"]');await _newRepository.default.deleteEntry({entryid:button.dataset.id}),window.location.reload()}if(event.target.closest('[data-action="edit-case"]')){const button=event.target.closest('[data-action="edit-case"]'),data=document.querySelector('[data-region="grading-app"]').dataset;data.entryid=button.dataset.id;const modalForm=(0,_generic_form_helper.genericFormCreate)(data,"case:edit",modulename,"case_form_edit",button.dataset.id);modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,onSubmitHandler),modalForm.show()}})))}}));

//# sourceMappingURL=case_form.min.js.map