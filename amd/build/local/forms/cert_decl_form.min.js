define("mod_competvet/local/forms/cert_decl_form",["exports","core_form/modalform","core/str"],(function(_exports,_modalform,_str){var obj;
/**
   * Create a Modal Form to add a Certificate Declaration
   *
   * @module     mod_competvet/local/forms/cert_decl_form
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};const getDataset=element=>{const data=document.querySelector('[data-region="grading-app"]').dataset,datasetLowercase=Object.entries(data).reduce(((acc,_ref)=>{let[key,value]=_ref;return acc[key.toLowerCase()]=value,acc}),{});return datasetLowercase.criterionid=element.dataset.id,element.dataset.declId&&(datasetLowercase.declid=element.dataset.declId),datasetLowercase},submitEventHandler=()=>{location.reload()};_exports.init=()=>{document.addEventListener("click",(function(event){if(event.target.closest('[data-action="cert-decl-student"]')){event.preventDefault();const button=event.target.closest('[data-action="cert-decl-student"]'),dataset=getDataset(button),modalForm=new _modalform.default({modalConfig:{title:(0,_str.get_string)("certdecl","mod_competvet")},formClass:"mod_competvet\\form\\cert_decl_student",args:{...dataset,currenturl:window.location.href},saveButtonText:(0,_str.get_string)("save")});modalForm.addEventListener(modalForm.events.LOADED,(()=>{modalForm.modal.getRoot().on("modal:bodyRendered",(()=>{const rangeInput=modalForm.modal.getRoot().find('input[type="range"]'),levelInput=modalForm.modal.getRoot().find('input[name="level"]'),currentLevel=modalForm.modal.getRoot().find('[data-region="current-level"]');rangeInput.val(levelInput.val()),currentLevel.text(levelInput.val()),rangeInput.on("input",(()=>{levelInput.val(rangeInput.val()),currentLevel.text(rangeInput.val())}))}))})),modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,submitEventHandler),modalForm.show()}if(event.target.closest('[data-action="cert-decl-evaluator"]')){const button=event.target.closest('[data-action="cert-decl-evaluator"]'),dataset=getDataset(button),modalForm=new _modalform.default({modalConfig:{title:(0,_str.get_string)("certdecl","mod_competvet")},formClass:"mod_competvet\\form\\cert_decl_evaluator",args:{...dataset,currenturl:window.location.href},saveButtonText:(0,_str.get_string)("save")});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,submitEventHandler),modalForm.addEventListener(modalForm.events.LOADED,(()=>{modalForm.modal.getRoot().on("modal:bodyRendered",(()=>{const rangeInput=modalForm.modal.getRoot().find('input[type="range"]'),levelInput=modalForm.modal.getRoot().find('input[name="level"]'),currentLevel=modalForm.modal.getRoot().find('[data-region="current-level"]');rangeInput.val(levelInput.val()),currentLevel.text(levelInput.val())}))})),modalForm.show()}}))}}));

//# sourceMappingURL=cert_decl_form.min.js.map