define("mod_competvet/local/helpers",["exports","./competstate","core/str"],(function(_exports,_competstate,_str){var obj;
/**
   * Small helper functions for the UI.
   *
   * @module     mod_competvet/local/grading/helpers
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.submitLoading=_exports.getLetterGrade=_exports.activateShowMoreLess=void 0,_competstate=(obj=_competstate)&&obj.__esModule?obj:{default:obj};const gradingApp=document.querySelector('[data-region="grading-app"]'),activateShowMoreLess=()=>{gradingApp.querySelectorAll('[data-region="commenttext"]').forEach((comment=>{if(comment.dataset.hasListener)return;const showMore=comment.querySelector('[data-action="showmore"]'),showLess=comment.querySelector('[data-action="showless"]'),shortText=comment.querySelector('[data-region="shorttext"]'),fullText=comment.querySelector('[data-region="fulltext"]');shortText.innerHTML.length!=fullText.innerHTML.length&&showMore.classList.remove("d-none"),showMore.addEventListener("click",(event=>{event.preventDefault(),shortText.classList.add("d-none"),fullText.classList.remove("d-none"),showMore.classList.add("d-none"),showLess.classList.remove("d-none")})),showLess.addEventListener("click",(event=>{event.preventDefault(),shortText.classList.remove("d-none"),fullText.classList.add("d-none"),showMore.classList.remove("d-none"),showLess.classList.add("d-none")})),showMore.dataset.hasListener=!0}))};_exports.activateShowMoreLess=activateShowMoreLess;const submitLoading=()=>{gradingApp.addEventListener("click",(async e=>{if(!e.target.matches('button[type="submit"]'))return;const submit=e.target;submit.classList.add("disabled"),submit.dataset.originalText=submit.innerHTML;submit.innerHTML='<span class="spinner-border spinner-border-sm mr-1" role="status" aria-hidden="true"></span>',submit.innerHTML+=await(0,_str.get_string)("processing","mod_competvet")}))};_exports.submitLoading=submitLoading,submitLoading(),activateShowMoreLess();_exports.getLetterGrade=grade=>{const scale=_competstate.default.getValue("scale");let letter="";for(const[key,value]of Object.entries(scale))parseFloat(grade)>=key&&(letter=value);return letter}}));

//# sourceMappingURL=helpers.min.js.map